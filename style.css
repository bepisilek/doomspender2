/* =======================================================================
   THEME TOKENS
   ======================================================================= */
:root{
  --bg-grad-1:#f7f9ff; --bg-grad-2:#eef2ff;
  --card:#ffffff; --text:#111827; --muted:#6b7280; --line:#e7ecfb;
  --blue:#0b66ff; --blue-2:#4b8dff; --green:#22c55e; --red:#ef4444; --yellow:#facc15; --violet:#8b5cf6; --orange:#fb923c;
  --radius:20px; --shadow:0 12px 28px rgba(2,6,23,.08);
  --pill:#eaf0ff; --overlay:rgba(0,0,0,.5);
}
/* =======================================================================
   RESET + BASE
   ======================================================================= */
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--text);
  background:linear-gradient(180deg,var(--bg-grad-1),var(--bg-grad-2));
  display:flex; justify-content:center; align-items:stretch;
  position:relative; overflow-x:hidden;
}
body::before,
body::after{
  content:""; position:fixed; width:420px; height:420px; border-radius:50%;
  background:radial-gradient(circle at center,var(--blue)33%,transparent 70%);
  filter:blur(120px); opacity:.45; z-index:-1; pointer-events:none;
  transition:transform .8s ease;
}
body::before{top:-220px; right:-160px;}
body::after{bottom:-260px; left:-200px; background:radial-gradient(circle at center,var(--violet)30%,transparent 72%);}

/* Layout wrapper */
.container{width:100%;max-width:520px;padding:18px 14px 110px;position:relative;isolation:isolate;background:rgba(255,255,255,.28);backdrop-filter:blur(22px)}
.container::before{
  content:""; position:absolute; inset:0; border-radius:calc(var(--radius) + 16px);
  background:linear-gradient(135deg,rgba(255,255,255,.65),rgba(234,240,255,.35));
  box-shadow:0 18px 44px rgba(15,36,84,.18);
  filter:blur(0); z-index:-1; opacity:.9;
}

/* Utils */
.hidden{display:none !important}
.center{text-align:center}
.right{text-align:right}
.bold{font-weight:900}
.pill{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,var(--pill),rgba(255,255,255,.65));color:var(--text);padding:3px 10px;border-radius:999px;font-weight:700;font-size:11px;box-shadow:0 6px 14px rgba(15,23,42,.08);backdrop-filter:blur(8px)}
.small{font-size:12px;color:var(--muted)}
.mt-6{margin-top:6px}
.mt-10{margin-top:10px}
.mt-12{margin-top:12px}
.mt-16{margin-top:16px}
.mt-20{margin-top:20px}
.a2hs-pill{position:fixed;left:50%;bottom:24px;transform:translate(-50%,6px);display:flex;align-items:center;gap:10px;padding:10px 16px;border-radius:999px;background:linear-gradient(135deg,var(--pill),rgba(255,255,255,.75));color:var(--text);box-shadow:0 16px 32px rgba(11,36,84,.18);backdrop-filter:blur(12px);z-index:1400;font-size:13px;font-weight:700;transition:opacity .25s ease,transform .25s ease;opacity:0;pointer-events:none}
.a2hs-pill.show{opacity:1;pointer-events:auto;transform:translate(-50%,0)}
.a2hs-pill button{border:none;background:rgba(255,255,255,.85);color:var(--text);font-weight:800;border-radius:999px;padding:6px 12px;cursor:pointer;box-shadow:0 6px 18px rgba(11,36,84,.16);transition:transform .18s ease,box-shadow .18s ease}
.a2hs-pill button:active{transform:scale(.97)}
.a2hs-pill .close{background:transparent;color:var(--muted);box-shadow:none;padding:4px;font-size:14px}


/* =======================================================================
   WELCOME
   ======================================================================= */
#welcomeScreen{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}
.welcome-logo{font-size:72px;margin-bottom:16px;animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.welcome-title{font-size:42px;font-weight:900;margin:0 0 12px;background:linear-gradient(135deg,var(--blue),var(--violet));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.welcome-subtitle{font-size:16px;color:var(--muted);margin:0 0 28px;line-height:1.6;max-width:320px}
.welcome-btn{background:linear-gradient(135deg,var(--blue),var(--violet));color:#fff;border:none;border-radius:20px;padding:16px 48px;font-size:18px;font-weight:800;cursor:pointer;box-shadow:0 18px 42px rgba(11,102,255,.32);transition:transform .2s,box-shadow .2s,filter .2s}
.welcome-btn:hover{transform:translateY(-3px);box-shadow:0 22px 54px rgba(11,102,255,.42);filter:saturate(1.05)}
.welcome-btn:active{transform:translateY(-1px)}

/* =======================================================================
   PROFILE SETUP
   ======================================================================= */
#profileSetupScreen h2{font-size:22px;margin:0 0 10px;text-align:center;color:var(--blue)}
#profileSetupScreen p{color:var(--muted);text-align:center;margin:-4px 0 14px}

/* =======================================================================
   HEADER + NAV TABS (PROFILE ICON ONLY!)
   ======================================================================= */
.app-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.brand{display:flex;flex-direction:column}
.brand h1{font-size:26px;font-weight:900;letter-spacing:-.01em;margin:0}
.brand small{color:var(--muted);font-size:12px}
.header-right{display:flex;align-items:center;gap:12px}
.profile-icon{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,var(--blue),var(--violet));color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:800;cursor:pointer;box-shadow:0 10px 24px rgba(11,102,255,.28);transition:transform .18s}
.profile-icon:hover{transform:translateY(-2px)}

/* Tabs WITHOUT profile */
.tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin:10px 0 12px}
.tab{border:none;border-radius:13px;background:#eaf0ff66;color:var(--text);font-weight:800;font-size:13px;padding:10px 0;cursor:pointer;transition:transform .12s,box-shadow .2s,background .25s ease,color .25s ease}
.tab:active{transform:scale(.98)}
.tab.active{background:linear-gradient(135deg,var(--blue),var(--violet));color:#fff;box-shadow:0 12px 28px rgba(11,102,255,.25)}

/* =======================================================================
   CARDS + FORM ELEMENTS
   ======================================================================= */
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px 16px;margin-bottom:16px;position:relative;overflow:hidden}
.card::before{
  content:""; position:absolute; inset:-1px; border-radius:inherit;
  border:1px solid rgba(255,255,255,.28); background:linear-gradient(160deg,rgba(255,255,255,.18),rgba(255,255,255,0));
  pointer-events:none; mix-blend-mode:soft-light;
}
h2{margin:0 0 10px;text-align:center;color:var(--blue);font-size:18px}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
input,select,textarea{width:100%;padding:12px 14px;border:1px solid color-mix(in srgb,var(--line) 80%,transparent);border-radius:14px;font-size:15px;background:rgba(255,255,255,.6);color:var(--text);transition:border .2s ease,box-shadow .2s ease,background .2s ease}
input:focus,select:focus,textarea:focus{border-color:color-mix(in srgb,var(--blue) 80%,#fff 20%);outline:none;box-shadow:0 0 0 3px rgba(11,102,255,.15);background:#fff}
.row{display:flex;gap:8px;margin-top:10px}
.calc-actions{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:16px}
.calc-actions .btn{display:flex;align-items:center;justify-content:center;width:100%;min-height:58px;padding:14px 0;touch-action:manipulation}
.btn{flex:1;border:none;border-radius:14px;padding:13px 0;font-size:15px;font-weight:900;color:#fff;cursor:pointer;transition:opacity .12s,transform .12s,box-shadow .2s,filter .2s}
.btn:hover{opacity:.95}
.btn:active{transform:translateY(1px);filter:brightness(.95)}
.btn-full{width:100%}
.blue{background:linear-gradient(135deg,var(--blue),var(--blue-2))}
.green{background:linear-gradient(135deg,#16a34a,var(--green))}
.red{background:linear-gradient(135deg,#f87171,var(--red))}
.yellow{background:linear-gradient(135deg,#fde047,var(--yellow));color:#111}
.gray{background:linear-gradient(135deg,#f3f4f6,#e5e7eb);color:#111}

/* Calculator result + coach bubble */
.result{background:linear-gradient(135deg,rgba(76,106,255,.12),rgba(143,109,255,.14));border:1px solid rgba(108,130,255,.3);color:#0b2a66;border-radius:14px;padding:12px 14px;font-weight:800;text-align:center;box-shadow:0 10px 24px rgba(15,36,84,.1)}
.bubble{position:fixed;right:12px;bottom:80px;max-width:280px;background:linear-gradient(135deg,var(--blue),var(--violet));color:#fff;padding:14px 16px;border-radius:18px;box-shadow:0 18px 44px rgba(0,0,0,.38);font-size:13px;z-index:1200;opacity:0;transform:translateY(14px) scale(.98);transition:opacity .25s,transform .3s cubic-bezier(.22,1,.36,1)}
.bubble.show{opacity:1;transform:translateY(0)}

/* =======================================================================
   MOBILE FIRST TWEAKS & MOTION PREFERENCES
   ======================================================================= */
@media (max-width:600px){
  .container{padding:16px 12px 96px}
  .app-header{padding:4px 0}
  .brand h1{font-size:24px}
  .tabs{gap:8px}
  .card{padding:16px 14px}
  .row{flex-direction:column}
  .calc-actions{grid-template-columns:1fr}
  .controls{grid-template-columns:1fr;gap:10px}
  .bubble{right:10px;left:10px;max-width:none}
}
@media (max-width:420px){
  .welcome-title{font-size:36px}
  .welcome-subtitle{font-size:15px}
  .welcome-btn{width:100%;padding:16px 0;font-size:17px}
  .app-header{flex-direction:column;align-items:flex-start;gap:12px}
  .tabs{grid-template-columns:repeat(2,1fr)}
  .tab{font-size:14px;padding:12px 0}
  .card{border-radius:18px}
  input,select,textarea{font-size:16px}
}
@media (max-width:360px){
  body::before,body::after{transform:scale(.8)}
  .welcome-title{font-size:32px}
  .pill{font-size:10px}
  .profile-icon{width:36px;height:36px;font-size:16px}
}
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition:none !important;scroll-behavior:auto !important}
  body::before,body::after{display:none}
}

/* Results list */
.controls{display:grid;grid-template-columns:1fr 120px 120px;gap:8px;margin-bottom:10px}
@media(max-width:420px){.controls{grid-template-columns:1fr 1fr}.controls .only-wide{grid-column:1/-1}}
.list{list-style:none;margin:6px 0 0;padding:0}
.item{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;padding:10px 0;border-bottom:1px solid var(--line)}
.meta{display:flex;align-items:center;gap:8px}
.badge{font-size:11px;border-radius:999px;padding:3px 8px;font-weight:800}
.b-green{background:#dffbe7;color:#0f5f32}.b-red{background:#ffe4e4;color:#8f1d1d}
.price{white-space:nowrap;font-weight:800}
.actions{display:flex;gap:6px}
.icon-btn{border:none;background:#eef2ff;color:#0b2a66;border-radius:10px;padding:8px;cursor:pointer}
.icon-btn.danger{background:#ffe5e5;color:#7d1b1b}
.icon-btn.secondary{background:#eaf9ef;color:#124d2a}

/* Undo snackbar */
.snack{position:fixed;left:50%;bottom:80px;transform:translateX(-50%);background:#101828;color:#fff;padding:12px 16px;border-radius:12px;box-shadow:0 18px 40px rgba(0,0,0,.3);display:flex;align-items:center;gap:10px;z-index:1300}
.snack button{background:#fff;color:#111;border:none;border-radius:10px;padding:6px 10px;font-weight:800;cursor:pointer}
.funny-threat{margin:18px auto 0;max-width:360px;padding:10px 16px;border-radius:14px;background:color-mix(in srgb,var(--card) 88%,transparent);border:1px solid color-mix(in srgb,var(--line) 65%,transparent);box-shadow:0 12px 30px rgba(15,36,84,.08);font-size:12px;line-height:1.5;color:var(--muted);text-align:center;opacity:0;transform:translateY(6px);transition:opacity .28s ease,transform .28s ease;pointer-events:none}
.funny-threat.show{opacity:1;transform:translateY(0)}

/* Stats */
.stat-legend{display:flex;align-items:center;justify-content:center;gap:12px;margin:6px 0 10px}
.dot{width:12px;height:12px;border-radius:50%}
.dot.green{background:var(--green)} .dot.red{background:var(--red)}
canvas{width:100%;height:auto;border-radius:12px;background:#ffffff08}

/* Goals */
.progress{height:12px;background:#e8ecff;border-radius:999px;overflow:hidden}
.progress .bar{height:100%;background:linear-gradient(135deg,var(--green),#66e3a0);width:0%}

/* Modals */
.modal{position:fixed;inset:0;background:var(--overlay);display:flex;align-items:center;justify-content:center;z-index:1500;padding:16px}
.modal-content{background:var(--card);border-radius:18px;box-shadow:var(--shadow);padding:16px;max-width:540px;width:100%}
.modal-actions{display:flex;gap:8px;margin-top:10px}
textarea.code{height:160px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

/* Footer */
footer{color:var(--muted);text-align:center;font-size:12px;margin-top:8px}

/* Tiny helpers for long screens */
.sep{height:8px}
